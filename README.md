# asio-async-tcp-frame

基于 asio 实现的跨平台异步 S-C 的 tcp 框架。同样包含了UDP的，但没有做可靠性方面的封装，而且UDP客户端部分是同步的（因为无连接，不需要一直监听？）。

自动分包，以及能够自定义头部结构体同于报文类型识别（自动处理报文长度）。

包格式：

```
+----------------------------+------------------+--------+
|  整个包去除这一部分的长度  |  包头的其他数据  |  数据  |
+----------------------------+------------------+--------+

^                    包头                       ^ 包数据 ^
```

Session 类 管理一对连接，处理分包以及维护收发缓存。依赖包头的 PakSize(unsigned long long) 类型判断包长度

而包头的其他数据所代表的类型为 PakHeadData(struct{}) 也就是默认不存数据，但仍会占据一个字节。

以上两个类型能在config.h更改。之所以不使用模板，是由于通常而言一个项目不需要同时使用两种协议，而模板又会延长编译时间。降低体验

Client 主动连接，持有一个 Session对象

Server 被动 Accept，管理很多 Session

Session 使用智能指针（由于可能需要在回调内关闭连接，需要在回调结束之后自动关闭连接，故使用智能指针）

具体内容查看example或头文件注释。

> 其实这个是毕设的副产物，个人项目不保稳定，拿出来糊弄人真是抱歉

example 展示了一个TCP的 echo 服务器/客户端，和一个UDP发送和接收端。

xmake 编译例子
